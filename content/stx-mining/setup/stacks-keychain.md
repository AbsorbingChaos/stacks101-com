---
title: "Setting up a Stacks Keychain"
date: 2021-01-02T15:36:10Z
description: "Not your keys, not your crypto."
layout: "section"
---

### Table of Contents

- [Creating a Keychain](#creating-a-keychain)
  - [Prerequisites](#prerequisites)
  - [Using @stacks-cli](#using-stacks-cli)
  - [Using stacks-gen](#using-stacks-gen)
- [Importing address into Bitcoind](#importing-address-into-bitcoind)
  - [Import Address](#import-address)
  - [Import Private Key](#import-private-key)
- [Other Resources](#other-resources)

## Creating a Keychain

### Prerequisites

{{< notification params="is-info is-light"
 content="<span class=\"has-text-weight-bold\">Note:</span> To generate a keychain, the command <code>npx</code> is used and requires that Node.js is installed." >}}

To check which version of each software you have installed, use the commands below:

```bash
node -v
npm -v
npx -v
```

If you need to install another version of node, the [Node Version Manager (nvm)](https://github.com/nvm-sh/nvm) is recommended for Linux, MacOS, and Windows WSL. If you are using Windows, directly download the software from the [Node.js website.](https://nodejs.dev)

### Using @stacks-cli

To generate a keychain using the command from the [Stacks documentation:](https://docs.blockstack.org/start-mining#running-a-miner)

```bash
npx @stacks/cli make_keychain > keychain.json
```

### Using stacks-gen

To generate a keychain using [stacks-gen from Pascal:](https://github.com/psq/stacks-gen)

```bash
npx -q stacks-gen sk > keychain.json
```

{{< notification params="is-info is-light"
 content="<span class=\"has-text-weight-bold\">Note:</span> Both commands above will save the keychain information to a file named <code>keychain.json</code>. You can view this file in any text editor or via the command line using <code>cat keychain.json</code> on Mac/Linux/WSL or <code>type keychain.json</code> on Windows." >}}

## Importing address into Bitcoind

In order to use your BTC address with `bitcoind`, you will need to first tell your node about your BTC address using either `importaddress` or `importprivkey` with `bitcoin-cli`.

A quick description of both options is below, with more information on the [Bitcoin Node page.](/stx-mining/setup/bitcoin-node/#using-bitcoin-cli)

{{< notification params="is-info is-light"
 content="<span class=\"has-text-weight-bold\">Note:</span> When running <code>importaddress</code> or <code>importprivkey</code>, it is important to add <code>-rpcclienttimeout=7200</code> when running bitcoin-cli to ensure the operation has enough time to complete." >}}

### Import Address

> Adds an address or script (in hex) that can be watched as if it were in your wallet but cannot be used to spend. Requires a new wallet backup.
> 
> [bitcoindeveloper: importaddress](https://developer.bitcoin.org/reference/rpc/importaddress.html)

In order to use `importaddress` we only need the BTC address generated by either tool listed above.

### Import Private Key

> Adds a private key (as returned by dumpprivkey) to your wallet. Requires a new wallet backup.
> 
> [bitcoindeveloper: importprivkey](https://developer.bitcoin.org/reference/rpc/importprivkey.html)

In order to use `importprivkey` we need a Wallet Import Format (WIF) formatted file, which can be obtained by using `stacks-gen`.

If you did not use `stacks-gen` to create your initial key, you can import your existing key using the backup phrase.

```bash
npx -q stacks-gen sk --phrase "replace with twenty four word backup phrase" > keychain_stacksgen.json
```

{{< notification params="is-info is-light"
 content="<span class=\"has-text-weight-bold\">Note:</span> Both commands above will save the keychain information to a file named <code>keychain_stacksgen.json</code>. You can view this file in any text editor or via the command line using <code>cat keychain_stacksgen.json</code> on Mac/Linux/WSL or <code>type keychain_stacksgen.json</code> on Windows." >}}

The file generated by `stacks-gen` will contain a value for `wif` that can be used with `bitcoin-cli importprivkey`.

## Other Resources

{{< columns param="start-columns" >}}
  {{< resource-card title="Bitcoin Node"
    desc="A walkthrough for setting up and interacting with bitcoind for use with stacks-node."
    link="/stx-mining/setup/bitcoin-node" >}}
  {{< resource-card title="Stacks Keychain"
    desc="A walkthrough of setting up a stacks keychain using various tools."
    link="/stx-mining/setup/stacks-keychain" >}}
  {{< resource-card title="Stacks Node"
    desc="A walkthrough for setting up stacks-node and configuring it for mining."
    link="/stx-mining/setup/stacks-node" >}}
{{< columns param="end-columns" >}}
